const oren=angular.module("oren",["ngRoute"]);oren.config(["$routeProvider",function($routeProvider){$routeProvider.when("/",{template:"<welcome></welcome>"}).when("/login",{template:"<login></login>"}).when("/dashboard",{template:"<dashboard></dashboard>"}).when("/register",{template:"<register></register>"}).when("/activate",{template:"<activation></activation>"}).otherwise({redirectTo:"/"})}]),oren.component("dashboard",{templateUrl:"web/dashboard.html",controller:function($scope,$location){var logout=()=>firebase.auth().signOut();firebase.auth().onAuthStateChanged(user=>{user?($scope.member=user.email,$scope.$digest()):window.location.replace("/#!/login")}),$scope.logout=logout}}),oren.component("activation",{templateUrl:"web/activation.html",controller:function($scope,$location){let client={};$scope.client=client,$scope.process=function(){firebase.auth().onAuthStateChanged(user=>{user&&firebase.firestore().collection("Accounts").doc(user.uid).set({name:$scope.client.firstname,lastname:$scope.client.lastname,phone:$scope.client.phone}).then(success=>{swal("Account Approved","Your account has been pre-approved","success")}).catch(error=>{swal("Network Issues","Slow internet detected","info")})})}}}),oren.component("login",{templateUrl:"web/login.html",controller:function($scope,$location){$scope.email="",$scope.password="",$scope.loginClient=function(){firebase.auth().signInWithEmailAndPassword($scope.email,$scope.password).then(loginUserToDashboard=>{window.location.replace("/#!/dashboard")}).catch(error=>{swal("Technical Error",error.message,"error")})}}}),oren.component("register",{templateUrl:"web/register.html",controller:function($scope,$location){$scope.registerClient=function(){$scope.client.password.length<6&&$scope.client.password2.length<6?swal("Fix Password","Password is too short try longer password","error"):$scope.client.password!==$scope.client.password2?swal("Match Passwords","Passwords do not match!","error"):void 0===$scope.client.email?swal("Invalid Email","Your email is invalid","error"):firebase.auth().createUserWithEmailAndPassword($scope.client.email,$scope.client.password).then(user=>{swal("Registration Success","Your email has been succesfully registered pending activation","success"),window.location.replace("/#!/activate")}).catch(error=>{swal("Technical Error",error.message,"error")})}}}),oren.component("welcome",{templateUrl:"web/welcome.html",controller:function($scope,$location){$scope.loginShow=function(){return $location.path("/login")},$scope.registerShow=function(){return $location.path("/register")}}});